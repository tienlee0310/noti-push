{"version":3,"sources":["webpack://DanmuJs/webpack/bootstrap","webpack://DanmuJs/./src/utils/util.js","webpack://DanmuJs/./node_modules/es5-ext/object/is-value.js","webpack://DanmuJs/./node_modules/type/value/is.js","webpack://DanmuJs/./src/index.js","webpack://DanmuJs/./src/danmu.js","webpack://DanmuJs/./node_modules/event-emitter/index.js","webpack://DanmuJs/./node_modules/d/index.js","webpack://DanmuJs/./node_modules/type/plain-function/is.js","webpack://DanmuJs/./node_modules/type/function/is.js","webpack://DanmuJs/./node_modules/type/prototype/is.js","webpack://DanmuJs/./node_modules/type/object/is.js","webpack://DanmuJs/./node_modules/es5-ext/object/assign/index.js","webpack://DanmuJs/./node_modules/es5-ext/object/assign/is-implemented.js","webpack://DanmuJs/./node_modules/es5-ext/object/assign/shim.js","webpack://DanmuJs/./node_modules/es5-ext/object/keys/index.js","webpack://DanmuJs/./node_modules/es5-ext/object/keys/is-implemented.js","webpack://DanmuJs/./node_modules/es5-ext/object/keys/shim.js","webpack://DanmuJs/./node_modules/es5-ext/function/noop.js","webpack://DanmuJs/./node_modules/es5-ext/object/valid-value.js","webpack://DanmuJs/./node_modules/es5-ext/object/normalize-options.js","webpack://DanmuJs/./node_modules/es5-ext/string/#/contains/index.js","webpack://DanmuJs/./node_modules/es5-ext/string/#/contains/is-implemented.js","webpack://DanmuJs/./node_modules/es5-ext/string/#/contains/shim.js","webpack://DanmuJs/./node_modules/es5-ext/object/valid-callable.js","webpack://DanmuJs/./src/control.js","webpack://DanmuJs/./src/domrecycle.js","webpack://DanmuJs/./src/main.js","webpack://DanmuJs/./src/channel.js","webpack://DanmuJs/./src/bullet.js","webpack://DanmuJs/./src/style/index.scss?2278","webpack://DanmuJs/./src/style/index.scss","webpack://DanmuJs/./node_modules/css-loader/lib/css-base.js","webpack://DanmuJs/./node_modules/style-loader/lib/addStyles.js","webpack://DanmuJs/./node_modules/style-loader/lib/urls.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","util","domObj","RecyclableDomList","createDom","el","tpl","attrs","cname","dom","document","createElement","className","innerHTML","keys","forEach","item","setAttribute","hasClass","classList","Array","some","match","RegExp","addClass","replace","split","add","removeClass","remove","reg","toggleClass","findDom","sel","querySelector","e","startsWith","getElementById","slice","deepCopy","dst","src","typeOf","Node","concat","obj","toString","copyDom","nodeType","back","tagName","attributes","node","formatTime","time","Math","floor","_undefined","val","DanmuJs","options","self","this","config","overlap","area","start","end","live","comments","direction","hideArr","comment","duration","container","emit","containerStyle","style","player","bulletBtn","Control","main","pause","play","stop","id","txt","opacity","fontSize","like","prior","realTime","data","unshift","readData","dataHandle","push","oldID","newID","containerPos_","getBoundingClientRect","queue","pauseMove","status","startMove","setLikeDom","danmu","mouseControl","pos","zIndex","force","forceDuration","size","channelSize","setFontSize","top","channel_id","topInit","channel","resize","indexOf","arr","filter","color","index","splice","on","once","off","methods","descriptors","base","callable","apply","Function","defineProperties","descriptor","configurable","writable","type","listener","arguments","__eeOnceListener__","__ee__","listeners","candidate","length","args","isValue","isPlainFunction","assign","normalizeOpts","contains","dscr","w","desc","gs","set","undefined","isFunction","classRe","functionToString","test","isPrototype","error","isObject","constructor","possibleTypes","foo","bar","trzy","max","dest","TypeError","process","opts1","result","String","str","searchString","fn","Main","defaultOff","state","switchBtn","RecyclableDOMList","initDOM","initSize","init","idleList","usingList","_id","_expand","firseIdle","shift","idx","textcontent","Channel","playedData","timer","retryTimer","retryStatus","interval","updateQueue","nums","rdata","bullet","bol","sort","a","b","setTimeout","resetWithCb","reset","channels","containerPos","resized","currentTime","list","Bullet","hasAttached","attach","hasAttach","addBullet","detach","noDiscard","removeBullet","containerWidth","width","containerHeight","height","containerLeft","left","containerRight","right","bulletResizeTimer","setInterval","resizeing","abs","isFullscreen","bookChannelId","navigator","userAgent","scroll","bottom","operating","bookId","channelWidth","channelHeight","num","occupy","ceil","message","flag","j","curBullet","curBulletPos","newT","curV","curT","newS","newV","bOffset","nextAddTime","channelId","loop","cb","moveV","use","appendChild","textContent","random","elPos","addEventListener","mouseoverFun","event","mouseControlPause","unuse","transformOrigin","transform","transition","clearTimeout","removeTimer","willChange","pastDuration","Date","getTime","moveTime","pastS","nowS","moveMoreS","moveContainerHeight","moveContainerWidth","startTime","hasMove","leftDuration","func","margin","bulletPos","parentNode","removeChild","children","outerHTML","content","locals","useSourceMap","map","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","memo","stylesInDom","isOldIE","window","all","atob","getTarget","target","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","parts","addStyle","listToStyles","newStyles","part","css","media","insertStyleElement","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","firstChild","before","removeStyleElement","createStyleElement","addAttrs","update","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","replacement","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import RecyclableDomList from '../domrecycle.js'\r\n\r\nlet util = {}\r\n\r\nutil.domObj = new RecyclableDomList()\r\n\r\nutil.createDom = function (el = 'div', tpl = '', attrs = {}, cname = '') {\r\n  let dom = document.createElement(el)\r\n  dom.className = cname\r\n  dom.innerHTML = tpl\r\n  Object.keys(attrs).forEach(item => {\r\n    let key = item\r\n    let value = attrs[item]\r\n    if (el === 'video' || el === 'audio') {\r\n      if (value) {\r\n        dom.setAttribute(key, value)\r\n      }\r\n    } else {\r\n      dom.setAttribute(key, value)\r\n    }\r\n  })\r\n  return dom\r\n}\r\n\r\nutil.hasClass = function (el, className) {\r\n  if (el.classList) {\r\n    return Array.prototype.some.call(el.classList, item => item === className)\r\n  } else {\r\n    return !!el.className.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'))\r\n  }\r\n}\r\n\r\nutil.addClass = function (el, className) {\r\n  if (el.classList) {\r\n    className.replace(/(^\\s+|\\s+$)/g, '').split(/\\s+/g).forEach(item => {\r\n      item && el.classList.add(item)\r\n    })\r\n  } else if (!util.hasClass(el, className)) {\r\n    el.className += ' ' + className\r\n  }\r\n}\r\n\r\nutil.removeClass = function (el, className) {\r\n  if (el.classList) {\r\n    className.split(/\\s+/g).forEach(item => {\r\n      el.classList.remove(item)\r\n    })\r\n  } else if (util.hasClass(el, className)) {\r\n    className.split(/\\s+/g).forEach(item => {\r\n      let reg = new RegExp('(\\\\s|^)' + item + '(\\\\s|$)')\r\n      el.className = el.className.replace(reg, ' ')\r\n    })\r\n  }\r\n}\r\n\r\nutil.toggleClass = function (el, className) {\r\n  className.split(/\\s+/g).forEach(item => {\r\n    if (util.hasClass(el, item)) {\r\n      util.removeClass(el, item)\r\n    } else {\r\n      util.addClass(el, item)\r\n    }\r\n  })\r\n}\r\n\r\nutil.findDom = function (el = document, sel) {\r\n  let dom\r\n  // fix querySelector IDs that start with a digit\r\n  // https://stackoverflow.com/questions/37270787/uncaught-syntaxerror-failed-to-execute-queryselector-on-document\r\n  try {\r\n    dom = el.querySelector(sel)\r\n  } catch (e) {\r\n    if (sel.startsWith('#')) {\r\n      dom = el.getElementById(sel.slice(1))\r\n    }\r\n  }\r\n  return dom\r\n}\r\n\r\nutil.deepCopy = function (dst, src) {\r\n  if (util.typeOf(src) === 'Object' && util.typeOf(dst) === 'Object') {\r\n    Object.keys(src).forEach(key => {\r\n      if (util.typeOf(src[key]) === 'Object' && !(src[key] instanceof Node)) {\r\n        if (!dst[key]) {\r\n          dst[key] = src[key]\r\n        } else {\r\n          util.deepCopy(dst[key], src[key])\r\n        }\r\n      } else if (util.typeOf(src[key]) === 'Array') {\r\n        dst[key] = util.typeOf(dst[key]) === 'Array' ? dst[key].concat(src[key]) : src[key]\r\n      } else {\r\n        dst[key] = src[key]\r\n      }\r\n    })\r\n    return dst\r\n  }\r\n}\r\n\r\nutil.typeOf = function (obj) {\r\n  return Object.prototype.toString.call(obj).match(/([^\\s.*]+)(?=]$)/g)[0]\r\n}\r\n\r\nutil.copyDom = function (dom) {\r\n  if (dom && dom.nodeType === 1) {\r\n    let back = document.createElement(dom.tagName)\r\n    Array.prototype.forEach.call(dom.attributes, (node) => {\r\n      back.setAttribute(node.name, node.value)\r\n    })\r\n    if (dom.innerHTML) {\r\n      back.innerHTML = dom.innerHTML\r\n    }\r\n    return back\r\n  } else {\r\n    return ''\r\n  }\r\n}\r\n\r\nutil.formatTime = function (time) {\r\n  let s = Math.floor(time)\r\n  let ms = time - s\r\n  return s * 1000 + ms\r\n}\r\n\r\nexport default util\r\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","import DanmuJs from './danmu'\r\nimport './style/index.scss'\r\nexport default DanmuJs\r\n","import EventEmitter from 'event-emitter'\r\nimport Control from './control'\r\nimport util from './utils/util'\r\n\r\nclass DanmuJs {\r\n  constructor (options) {\r\n    let self = this\r\n    self.config = util.deepCopy({\r\n      overlap: false,\r\n      area: {\r\n        start: 0,\r\n        end: 1\r\n      },\r\n      live: false,\r\n      comments: [],\r\n      direction: 'r2l'\r\n    }, options)\r\n    self.hideArr = []\r\n    EventEmitter(self)\r\n    self.config.comments.forEach(comment => {\r\n      comment.duration = comment.duration ? comment.duration : 5000\r\n      if(!comment.mode) {\r\n        comment.mode = 'scroll'\r\n      }\r\n    })\r\n    if(self.config.container && self.config.container.nodeType === 1) {\r\n      self.container = self.config.container\r\n    } else {\r\n      self.emit('error', 'container id can\\'t be empty')\r\n      return false\r\n    }\r\n    if(self.config.containerStyle) {\r\n      let style = self.config.containerStyle\r\n      Object.keys(style).forEach(function (key) {\r\n        self.container.style[key] = style[key]\r\n      })\r\n    }\r\n    self.live = self.config.live\r\n    self.player = self.config.player\r\n    self.direction = self.config.direction\r\n    util.addClass(self.container, 'danmu')\r\n    self.bulletBtn = new Control(self)\r\n    self.emit('ready')\r\n  }\r\n  \r\n  start () {\r\n    this.bulletBtn.main.start()\r\n  }\r\n\r\n  pause () {\r\n    this.bulletBtn.main.pause()\r\n  }\r\n\r\n  play () {\r\n    this.bulletBtn.main.play()\r\n  }\r\n\r\n  stop () {\r\n    this.bulletBtn.main.stop()\r\n  }\r\n\r\n  sendComment (comment) {\r\n    if(!comment.duration) {\r\n      comment.duration = 15000\r\n    }\r\n    if (comment && comment.id && comment.duration && (comment.el || comment.txt)) {\r\n      comment.duration = comment.duration ? comment.duration : 5000\r\n      // console.log(comment.style)\r\n      if (comment.style) {\r\n        if (this.opacity && this.opacity !== comment.style.opacity) {\r\n          comment.style.opacity = this.opacity\r\n        }\r\n        if (this.fontSize && this.fontSize !== comment.style.fontSize) {\r\n          comment.style.fontSize = this.fontSize\r\n        }\r\n        if (this.like) {\r\n          comment.like = comment.like ? comment.like : this.like\r\n        }\r\n      }\r\n      if(comment.prior || comment.realTime) {\r\n        this.bulletBtn.main.data.unshift(comment)\r\n        if (comment.realTime) {\r\n          this.bulletBtn.main.readData()\r\n          this.bulletBtn.main.dataHandle()\r\n        }\r\n      } else {\r\n        this.bulletBtn.main.data.push(comment)\r\n      }\r\n    }\r\n  }\r\n\r\n  setCommentID (oldID, newID) {\r\n    let containerPos_ = this.container.getBoundingClientRect()\r\n    if (oldID && newID) {\r\n      this.bulletBtn.main.data.some(data => {\r\n        if(data.id === oldID) {\r\n          data.id = newID\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n      this.bulletBtn.main.queue.some(item => {\r\n        if(item.id === oldID) {\r\n          item.id = newID\r\n          item.pauseMove(containerPos_)\r\n          this.bulletBtn.main.status !== 'paused' && item.startMove(containerPos_)\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  setCommentDuration (id, duration) {\r\n    let containerPos_ = this.container.getBoundingClientRect()\r\n    if (id && duration) {\r\n      duration = duration ? duration : 5000\r\n      this.bulletBtn.main.data.some(data => {\r\n        if(data.id === id) {\r\n          data.duration = duration\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n      this.bulletBtn.main.queue.some(item => {\r\n        if(item.id === id) {\r\n          item.duration = duration\r\n          item.pauseMove(containerPos_)\r\n          this.bulletBtn.main.status !== 'paused' && item.startMove(containerPos_)\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  setCommentLike (id, like) {\r\n    let containerPos_ = this.container.getBoundingClientRect()\r\n    this.like = like\r\n    if (id && like) {\r\n      this.bulletBtn.main.data.some(data => {\r\n        if(data.id === id) {\r\n          data.like = like\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n      this.bulletBtn.main.queue.some(item => {\r\n        if(item.id === id) {\r\n          item.pauseMove(containerPos_)\r\n          item.setLikeDom(like.el, like.style)\r\n          if (item.danmu.bulletBtn.main.status !== 'paused') {\r\n            item.startMove(containerPos_)\r\n          }\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  restartComment (id) {\r\n    this.mouseControl = false\r\n    let pos = this.container.getBoundingClientRect()\r\n    if (id) {\r\n      this.bulletBtn.main.queue.some(item => {\r\n        if(item.id === id) {\r\n          if (item.danmu.bulletBtn.main.status !== 'paused') {\r\n            item.startMove(pos, true)\r\n          }\r\n          else {\r\n            item.status = 'paused'\r\n          }\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  freezeComment (id) {\r\n    this.mouseControl = true\r\n    let pos = this.container.getBoundingClientRect()\r\n    if (id) {\r\n      this.bulletBtn.main.queue.some(item => {\r\n        if(item.id === id) {\r\n          item.status = 'forcedPause'\r\n          item.pauseMove(pos)\r\n          if (item.el && item.el.style) {\r\n            item.el.style.zIndex = 10\r\n          }\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  removeComment (id) {\r\n    if (!id) return\r\n    this.bulletBtn.main.queue.some(item => {\r\n      if(item.id === id) {\r\n        item.remove()\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n  }\r\n\r\n  setAllDuration (mode = 'scroll', duration, force = true) {\r\n    let containerPos_ = this.container.getBoundingClientRect()\r\n    if (duration) {\r\n      duration = duration ? duration : 5000\r\n      if (force) {\r\n        this.bulletBtn.main.forceDuration = duration\r\n      }\r\n      this.bulletBtn.main.data.forEach(data => {\r\n        if(mode === data.mode) {\r\n          data.duration = duration\r\n        }\r\n      })\r\n      this.bulletBtn.main.queue.forEach(item => {\r\n        if(mode === item.mode) {\r\n          item.duration = duration\r\n          item.pauseMove(containerPos_)\r\n          if (item.danmu.bulletBtn.main.status !== 'paused') {\r\n            item.startMove(containerPos_)\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  setOpacity (opacity) {\r\n    this.container.style.opacity = opacity\r\n  }\r\n  \r\n  setFontSize (size, channelSize) {\r\n    this.fontSize = `${size}px`\r\n    if (size) {\r\n      this.bulletBtn.main.data.forEach(data => {\r\n        if (data.style) {\r\n          data.style.fontSize = this.fontSize\r\n        }\r\n      })\r\n      this.bulletBtn.main.queue.forEach(item => {\r\n        if (!item.options.style) {\r\n          item.options.style = {}\r\n        }\r\n        \r\n        item.options.style.fontSize = this.fontSize\r\n        item.setFontSize(this.fontSize)\r\n        if (channelSize) {\r\n          item.top = item.channel_id[0] * channelSize;\r\n          item.topInit()\r\n        }\r\n      })\r\n    }\r\n    if (channelSize) {\r\n      this.config.channelSize = channelSize\r\n      this.bulletBtn.main.channel.resize(true)\r\n    }\r\n  }\r\n  \r\n  setArea (area) {\r\n    this.config.area = area\r\n    this.bulletBtn.main.channel.resize(true)\r\n  }\r\n\r\n  hide (mode = 'scroll') {\r\n    if(this.hideArr.indexOf(mode) < 0) {\r\n      this.hideArr.push(mode)\r\n    }\r\n    let arr = this.bulletBtn.main.queue.filter(item => mode === item.mode || (mode === 'color' && item.color))\r\n    arr.forEach(item => item.remove())\r\n  }\r\n\r\n  show (mode = 'scroll') {\r\n    let index = this.hideArr.indexOf(mode)\r\n    if(index > -1) {\r\n      this.hideArr.splice(index, 1)\r\n    }\r\n  }\r\n\r\n  setDirection (direction = 'r2l') {\r\n    this.emit('changeDirection', direction)\r\n  }\r\n}\r\n\r\nexport default DanmuJs\r\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src /*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1 /*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString /*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","import util from './utils/util'\r\nimport Main from './main'\r\n\r\nclass Control {\r\n  constructor (danmu) {\r\n    this.danmu = danmu\r\n    this.main = new Main(danmu)\r\n    if(!danmu.config.defaultOff) {\r\n      this.main.start()\r\n    }\r\n  }\r\n\r\n  createSwitch (state = true) {\r\n    this.switchBtn = util.createDom('dk-switch', '<span class=\"txt\">弹</span>', {}, `danmu-switch ${state ? 'danmu-switch-active' : ''}`)\r\n    return this.switchBtn\r\n  }\r\n}\r\n\r\nexport default Control\r\n","\r\nexport default class RecyclableDOMList {\r\n  constructor(options) {\r\n    options = {\r\n      initDOM: () => document.createElement('div'),\r\n      initSize: 10\r\n    }\r\n    this.init(options)\r\n  }\r\n\r\n  init(options) {\r\n    this.idleList = []\r\n    this.usingList = []\r\n    this._id = 0\r\n    this.options = options\r\n    this._expand(options.initSize)\r\n  }\r\n\r\n  use() {\r\n    if (!this.idleList.length) {\r\n      this._expand(1)\r\n    }\r\n    const firseIdle = this.idleList.shift()\r\n    this.usingList.push(firseIdle)\r\n    return firseIdle\r\n  }\r\n\r\n  unuse(dom) {\r\n    const idx = this.usingList.indexOf(dom)\r\n    if (idx < 0) {\r\n      return\r\n    }\r\n    this.usingList.splice(idx, 1)\r\n    dom.innerHTML = ''\r\n    dom.textcontent = ''\r\n    dom.style = ''\r\n    this.idleList.push(dom)\r\n  }\r\n\r\n  _expand(size) {\r\n    for (let i = 0; i < size; i++) {\r\n      this.idleList.push(this.options.initDOM(this._id++))\r\n    }\r\n  }\r\n}","import Channel from './channel'\r\nimport Bullet from './bullet'\r\nimport util from './utils/util'\r\n\r\n/**\r\n * [Main 弹幕主进程]\r\n * @type {Class}\r\n */\r\nclass Main {\r\n  constructor (danmu) {\r\n    this.danmu = danmu\r\n    this.container = danmu.container\r\n    this.channel = new Channel(danmu)// 弹幕轨道实例\r\n    this.data = [].concat(danmu.config.comments)\r\n    this.playedData = []\r\n    this.queue = []// 等待播放的弹幕队列\r\n    this.timer = null// 弹幕动画定时器句柄\r\n    this.retryTimer = null// 弹幕更新重试定时器句柄\r\n    this.retryStatus = 'normal'\r\n    this.interval = danmu.config.interval || 2000// 弹幕队列缓存间隔\r\n    this.status = 'idle'// 当前弹幕正在闲置\r\n    danmu.on('bullet_remove', this.updateQueue.bind(this))\r\n    let self = this\r\n    this.danmu.on('changeDirection', direction => {\r\n      self.danmu.direction = direction\r\n    })\r\n    this.nums = 0\r\n  }\r\n  // 在渲染队列中移除已经展示完的弹幕对象\r\n  updateQueue (rdata) {\r\n    let self = this\r\n    self.queue.some((item, index) => {\r\n      if (item.id === rdata.bullet.id) {\r\n        self.queue.splice(index, 1)\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n  }\r\n  init (bol, self) {\r\n    if (!self) {\r\n      self = this\r\n    }\r\n    self.retryStatus = 'normal'\r\n    self.data.sort((a, b) => a.start - b.start)\r\n    let dataHandle = function () {\r\n      self.readData()\r\n      self.dataHandle()\r\n      if (self.retryStatus !== 'stop') {\r\n        setTimeout(function () {\r\n          dataHandle()\r\n        }, self.interval - 1000)\r\n      }\r\n    }\r\n    if (!self.retryTimer) {\r\n      dataHandle()\r\n    }\r\n  }\r\n  // 启动弹幕渲染主进程\r\n  start () {\r\n    let self = this\r\n    this.status = 'playing'\r\n    this.queue = []\r\n    this.container.innerHTML = ''\r\n    this.channel.resetWithCb(self.init, self)\r\n  }\r\n  stop () {\r\n    let self = this\r\n    this.status = 'closed'\r\n    self.retryTimer = null\r\n    self.retryStatus = 'stop'\r\n    self.channel.reset()\r\n    this.queue = []\r\n    self.container.innerHTML = ''\r\n  }\r\n  play () {\r\n    this.status = 'playing'\r\n    let channels = this.channel.channels\r\n    let containerPos = this.danmu.container.getBoundingClientRect()\r\n    if (channels && channels.length > 0) {\r\n      ['scroll', 'top', 'bottom'].forEach( key => {\r\n        for (let i = 0; i < channels.length; i++) {\r\n          channels[i].queue[key].forEach(item => {\r\n            if(!item.resized) {\r\n              item.startMove(containerPos)\r\n              item.resized = true\r\n            }\r\n          })\r\n        }\r\n        for (let i = 0; i < channels.length; i++) {\r\n          channels[i].queue[key].forEach(item => {\r\n            item.resized = false\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n  pause () {\r\n    this.status = 'paused'\r\n    let channels = this.channel.channels\r\n    let containerPos = this.danmu.container.getBoundingClientRect()\r\n    if (channels && channels.length > 0) {\r\n      // ['scroll', 'top', 'bottom'].forEach( key => {\r\n      //   for (let i = 0; i < channels.length; i++) {\r\n      //     channels[i].queue[key].forEach(item => {\r\n      //       item.pauseMove(containerPos)\r\n      //     })\r\n      //   }\r\n      // })\r\n      this.queue.forEach(item => {\r\n        item.pauseMove(containerPos)\r\n      })\r\n    }\r\n  }\r\n  dataHandle () {\r\n    let self = this\r\n    if (this.status === 'paused' || this.status === 'closed') {\r\n      return\r\n    }\r\n    if (self.queue.length) {\r\n      self.queue.forEach(item => {\r\n        if (item.status === 'waiting' || item.status === 'paused') {\r\n          // item.status = 'start'\r\n          item.startMove(self.channel.containerPos)\r\n        }\r\n      })\r\n    }\r\n  }\r\n  readData () {\r\n    let self = this, danmu = this.danmu\r\n    let currentTime = 0\r\n    if(danmu.player && danmu.player.currentTime) {\r\n      currentTime = util.formatTime(danmu.player.currentTime)\r\n    }\r\n    let bullet, interval = self.interval, channel = self.channel, result\r\n    let list\r\n    if(danmu.player) {\r\n      list = self.data.filter(item => {\r\n        if (!item.start && self.danmu.hideArr.indexOf(item.mode) < 0) {\r\n          if (!item.color || self.danmu.hideArr.indexOf('color') < 0) {\r\n            item.start = currentTime\r\n          }\r\n        }\r\n        return self.danmu.hideArr.indexOf(item.mode) < 0 && (!item.color || self.danmu.hideArr.indexOf('color') < 0) && item.start - interval <= currentTime && currentTime <= item.start + interval\r\n      })\r\n      if(danmu.live) {\r\n        self.data = self.data.filter(item => {\r\n          if (!item.start) {\r\n            item.start = currentTime\r\n          }\r\n          return item.start > currentTime - 3 * interval\r\n        })\r\n      }\r\n    } else {\r\n      list = self.data.splice(0, 1)\r\n      // self.data = []\r\n      if(list.length === 0) list = self.playedData.splice(0, 1)\r\n    }\r\n\r\n    if (list.length > 0) {\r\n      list.forEach(item => {\r\n        if (self.forceDuration && self.forceDuration != item.duration) {\r\n          item.duration = self.forceDuration;\r\n        }\r\n        bullet = new Bullet(danmu, item)\r\n        if (!item.hasAttached) {\r\n          bullet.attach()\r\n          item.hasAttach = true\r\n        }\r\n        result = channel.addBullet(bullet)\r\n        if (result.result) {\r\n          self.queue.push(bullet)\r\n          self.nums++;\r\n          bullet.topInit()\r\n        } else {\r\n          bullet.detach()\r\n          if(item.noDiscard) {\r\n            if(item.prior) {\r\n              self.data.unshift(item)\r\n            } else {\r\n              self.data.push(item)\r\n            }\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport default Main\r\n","/**\r\n * [Channel 弹幕轨道控制]\r\n * @type {Class}\r\n */\r\nclass Channel {\r\n  constructor (danmu) {\r\n    this.danmu = danmu\r\n    this.reset()\r\n    let self = this\r\n    this.danmu.on('bullet_remove', function (r) {\r\n      self.removeBullet(r.bullet)\r\n    })\r\n    this.direction = danmu.direction\r\n    this.danmu.on('changeDirection', direction => {\r\n      self.direction = direction\r\n    })\r\n\r\n    this.containerPos = this.danmu.container.getBoundingClientRect()\r\n    this.containerWidth = this.containerPos.width\r\n    this.containerHeight = this.containerPos.height\r\n    this.containerLeft = this.containerPos.left\r\n    this.containerRight = this.containerPos.right\r\n    this.danmu.bulletResizeTimer = setInterval(function () {\r\n      self.containerPos = self.danmu.container.getBoundingClientRect()\r\n      if (self.resizeing) {\r\n        return\r\n      }\r\n      if (Math.abs(self.containerPos.width - self.containerWidth) >= 2 || Math.abs(self.containerPos.height - self.containerHeight) >= 2 || Math.abs(self.containerPos.left - self.containerLeft) >= 2 || Math.abs(self.containerPos.right - self.containerRight) >= 2) {\r\n        self.containerWidth = self.containerPos.width\r\n        self.containerHeight = self.containerPos.height\r\n        self.containerLeft = self.containerPos.left\r\n        self.containerRight = self.containerPos.right\r\n        self.resize(true)\r\n      }\r\n    }, 50)\r\n  }\r\n  resize (isFullscreen = false) {\r\n    let container = this.danmu.container\r\n    let self = this\r\n    if (self.resizeing) {\r\n      return\r\n    }\r\n    self.resizeing = true\r\n    setTimeout(function () {\r\n      let isDanmuPause = self.danmu.bulletBtn.main.status === 'paused'\r\n      if (self.danmu.bulletBtn.main.data) {\r\n        self.danmu.bulletBtn.main.data.forEach(item => {\r\n          if (item.bookChannelId) {\r\n            delete item['bookChannelId']\r\n            // console.log('resize导致' + item.id + '号优先弹幕预定取消')\r\n          }\r\n        })\r\n      }\r\n      // console.log('resize导致所有轨道恢复正常使用')\r\n      let size = container.getBoundingClientRect()\r\n      self.width = size.width\r\n      self.height = size.height\r\n  \r\n      if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\r\n        if(self.direction === 'b2t') {\r\n          self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\r\n        } else {\r\n          self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\r\n        }\r\n      }\r\n      self.container = container\r\n      let fontSize = self.danmu.config.channelSize || (/mobile/ig.test(navigator.userAgent) ? 10 : 12)\r\n      let channelSize\r\n      if(self.direction === 'b2t') {\r\n        channelSize = Math.floor(self.width / fontSize)\r\n      } else {\r\n        channelSize = Math.floor(self.height / fontSize)\r\n      }\r\n      let channels = []\r\n      for (let i = 0; i < channelSize; i++) {\r\n        channels[i] = {\r\n          id: i,\r\n          queue: {\r\n            scroll: [],\r\n            top: [],\r\n            bottom: []\r\n          },\r\n          operating: {\r\n            scroll: false,\r\n            top: false,\r\n            bottom: false\r\n          },\r\n          bookId: {}\r\n        }\r\n      }\r\n      if (self.channels && self.channels.length <= channels.length) {\r\n        for (let i = 0; i < self.channels.length; i++) {\r\n          channels[i] = {\r\n            id: i,\r\n            queue: {\r\n              scroll: [],\r\n              top: [],\r\n              bottom: []\r\n            },\r\n            operating: {\r\n              scroll: false,\r\n              top: false,\r\n              bottom: false\r\n            },\r\n            bookId: {}\r\n          };\r\n          ['scroll', 'top'].forEach(key => {\r\n            self.channels[i].queue[key].forEach(item => {\r\n              if (item.el) {\r\n                channels[i].queue[key].push(item)\r\n                if(!item.resized) {\r\n                  item.pauseMove(self.containerPos, isFullscreen)\r\n                  if (item.danmu.bulletBtn.main.status !== 'paused') {\r\n                    item.startMove(self.containerPos)\r\n                  }\r\n                  item.resized = true\r\n                }\r\n              }\r\n            })\r\n          })\r\n          self.channels[i].queue['bottom'].forEach(item => {\r\n            if (item.el) {\r\n              channels[i + channels.length - self.channels.length].queue['bottom'].push(item)\r\n              if(item.channel_id[0] + item.channel_id[1] - 1 === i) {\r\n                let channel_id = [].concat(item.channel_id)\r\n                item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\r\n                item.top = item.channel_id[0] * fontSize\r\n                if (self.danmu.config.area && self.danmu.config.area.start) {\r\n                  item.top += self.containerHeight * self.danmu.config.area.start\r\n                }\r\n                item.topInit()\r\n              }\r\n              if(!item.resized) {\r\n                item.pauseMove(self.containerPos, isFullscreen)\r\n                if (item.danmu.bulletBtn.main.status !== 'paused') {\r\n                  item.startMove(self.containerPos)\r\n                }\r\n                item.resized = true\r\n              }\r\n            }\r\n          })\r\n        }\r\n        for (let i = 0; i < channels.length; i++) {\r\n          ['scroll', 'top', 'bottom'].forEach(key => {\r\n            channels[i].queue[key].forEach(item => {\r\n              // console.log('resized 重置:' + item)\r\n              item.resized = false\r\n            })\r\n          })\r\n        }\r\n        self.channels = channels\r\n        if(self.direction === 'b2t') {\r\n          self.channelWidth = fontSize\r\n        } else {\r\n          self.channelHeight = fontSize\r\n        }\r\n      } else if (self.channels && self.channels.length > channels.length) {\r\n        for (let i = 0; i < channels.length; i++) {\r\n          channels[i] = {\r\n            id: i,\r\n            queue: {\r\n              scroll: [],\r\n              top: [],\r\n              bottom: []\r\n            },\r\n            operating: {\r\n              scroll: false,\r\n              top: false,\r\n              bottom: false\r\n            },\r\n            bookId: {}\r\n          };\r\n          ['scroll', 'top', 'bottom'].forEach(key => {\r\n            if (key === 'top' && i > Math.floor(channels.length / 2)) {\r\n  \r\n            } else if (key === 'bottom' && i <= Math.floor(channels.length / 2)) {\r\n  \r\n            } else {\r\n              let num = key === 'bottom' ? i - channels.length + self.channels.length : i\r\n              self.channels[num].queue[key].forEach((item, index) => {\r\n                if (item.el) {\r\n                  channels[i].queue[key].push(item)\r\n                  if(key === 'bottom') {\r\n                    if(item.channel_id[0] + item.channel_id[1] - 1 === num) {\r\n                      let channel_id = [].concat(item.channel_id)\r\n                      item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\r\n                      item.top = item.channel_id[0] * fontSize\r\n                      if (self.danmu.config.area && self.danmu.config.area.start) {\r\n                        item.top += self.containerHeight * self.danmu.config.area.start\r\n                      }\r\n                      item.topInit()\r\n                    }\r\n                  }\r\n                  item.pauseMove(self.containerPos, isFullscreen)\r\n                  if (item.danmu.bulletBtn.main.status !== 'paused') {\r\n                    item.startMove(self.containerPos)\r\n                  }\r\n                  if(!item.resized) {\r\n                    item.resized = true\r\n                  }\r\n                }\r\n                self.channels[num].queue[key].splice(index, 1)\r\n              })\r\n            }\r\n          })\r\n        }\r\n        for (let i = channels.length; i < self.channels.length; i++) {\r\n          ['scroll', 'top', 'bottom'].forEach(key => {\r\n            self.channels[i].queue[key].forEach(item => {\r\n              item.pauseMove(self.containerPos)\r\n              item.remove()\r\n            })\r\n          })\r\n        }\r\n        for (let i = 0; i < channels.length; i++) {\r\n          ['scroll', 'top', 'bottom'].forEach(key => {\r\n            channels[i].queue[key].forEach(item => {\r\n              // console.log('resized 重置:' + item)\r\n              item.resized = false\r\n            })\r\n          })\r\n        }\r\n        self.channels = channels\r\n        if(self.direction === 'b2t') {\r\n          self.channelWidth = fontSize\r\n        } else {\r\n          self.channelHeight = fontSize\r\n        }\r\n      }\r\n      self.resizeing = false\r\n    }, 10)\r\n  }\r\n  addBullet (bullet) {\r\n    // if (bullet.prior) {\r\n      // console.log(bullet.id + '号优先弹幕请求注册')\r\n    // }\r\n    let self = this\r\n    let danmu = this.danmu\r\n    let channels = this.channels\r\n    let channelHeight, channelWidth, occupy\r\n    if(self.direction === 'b2t') {\r\n      channelWidth = this.channelWidth\r\n      occupy = Math.ceil(bullet.width / channelWidth)\r\n    } else {\r\n      channelHeight = this.channelHeight\r\n      occupy = Math.ceil(bullet.height / channelHeight)\r\n    }\r\n    if (occupy > channels.length) {\r\n      return {\r\n        result: false,\r\n        message: `exceed channels.length, occupy=${occupy},channelsSize=${channels.length}`\r\n      }\r\n    } else {\r\n      let flag = true, channel, pos = -1\r\n      for (let i = 0, max = channels.length; i < max; i++) {\r\n        if (channels[i].queue[bullet.mode].some(item => item.id === bullet.id)) {\r\n          return {\r\n            result: false,\r\n            message: `exsited, channelOrder=${i},danmu_id=${bullet.id}`\r\n          }\r\n        }\r\n      }\r\n      if(bullet.mode === 'scroll') {\r\n        for (let i = 0, max = channels.length - occupy; i <= max; i++) {\r\n          flag = true\r\n          for (let j = i; j < i + occupy; j++) {\r\n            channel = channels[j]\r\n            if (channel.operating.scroll) {\r\n              flag = false\r\n              break\r\n            }\r\n            if ((channel.bookId.scroll || bullet.prior) && (channel.bookId.scroll !== bullet.id)) {\r\n              flag = false\r\n              break\r\n            }\r\n            channel.operating.scroll = true\r\n            let curBullet = channel.queue.scroll[0]\r\n            if (curBullet) {\r\n              let curBulletPos = curBullet.el.getBoundingClientRect()\r\n              if(self.direction === 'b2t') {\r\n                if (curBulletPos.bottom > self.containerPos.bottom) {\r\n                  flag = false\r\n                  channel.operating.scroll = false\r\n                  break\r\n                }\r\n              } else {\r\n                if (curBulletPos.right > self.containerPos.right) {\r\n                  flag = false\r\n                  channel.operating.scroll = false\r\n                  break\r\n                }\r\n              }\r\n\r\n              // Vcur * t + Scur已走 - Widthcur = Vnew * t\r\n              // t = (Scur已走 - Widthcur) / (Vnew - Vcur)\r\n              // Vnew * t < Widthplayer\r\n              let curS, curV, curT, newS, newV, newT\r\n              if(self.direction === 'b2t') {\r\n                curS = curBulletPos.top - self.containerPos.top + curBulletPos.height\r\n\r\n                curV = (self.containerPos.height + curBulletPos.height) / curBullet.duration\r\n                curT = curS / curV\r\n\r\n                newS = self.containerPos.height\r\n                newV = (self.containerPos.height + bullet.height) / bullet.duration\r\n              } else {\r\n                curS = curBulletPos.left - self.containerPos.left + curBulletPos.width\r\n\r\n                curV = (self.containerPos.width + curBulletPos.width) / curBullet.duration\r\n                curT = curS / curV\r\n\r\n                newS = self.containerPos.width\r\n                newV = (self.containerPos.width + bullet.width) / bullet.duration\r\n              }\r\n              newT = newS / newV\r\n              if (!danmu.config.bOffset) {\r\n                danmu.config.bOffset = 0\r\n              }\r\n              if (curV < newV && curT + danmu.config.bOffset > newT) {\r\n                flag = false\r\n                channel.operating.scroll = false\r\n                break\r\n              }\r\n            }\r\n            channel.operating.scroll = false\r\n          }\r\n          if (flag) {\r\n            pos = i\r\n            break\r\n          }\r\n        }\r\n      } else if (bullet.mode === 'top') {\r\n        for (let i = 0, max = channels.length - occupy; i <= max; i++) {\r\n          flag = true\r\n          for (let j = i; j < i + occupy; j++) {\r\n            if(j > Math.floor(channels.length / 2)) {\r\n              flag = false\r\n              break\r\n            }\r\n            channel = channels[j]\r\n            if (channel.operating[bullet.mode]) {\r\n              flag = false\r\n              break\r\n            }\r\n            if ((channel.bookId[bullet.mode] || bullet.prior) && (channel.bookId[bullet.mode] !== bullet.id)) {\r\n              flag = false\r\n              break\r\n            }\r\n            channel.operating[bullet.mode] = true\r\n            if (channel.queue[bullet.mode].length > 0) {\r\n              flag = false\r\n              channel.operating[bullet.mode] = false\r\n              break\r\n            }\r\n            channel.operating[bullet.mode] = false\r\n          }\r\n          if (flag) {\r\n            pos = i\r\n            break\r\n          }\r\n        }\r\n      } else if (bullet.mode === 'bottom') {\r\n        for (let i = channels.length - occupy; i >= 0; i--) {\r\n          flag = true\r\n          for (let j = i; j < i + occupy; j++) {\r\n            if(j <= Math.floor(channels.length / 2)) {\r\n              flag = false\r\n              break\r\n            }\r\n            channel = channels[j]\r\n            if (channel.operating[bullet.mode]) {\r\n              flag = false\r\n              break\r\n            }\r\n            if ((channel.bookId[bullet.mode] || bullet.prior) && (channel.bookId[bullet.mode] !== bullet.id)) {\r\n              flag = false\r\n              break\r\n            }\r\n            channel.operating[bullet.mode] = true\r\n            if (channel.queue[bullet.mode].length > 0) {\r\n              flag = false\r\n              channel.operating[bullet.mode] = false\r\n              break\r\n            }\r\n            channel.operating[bullet.mode] = false\r\n          }\r\n          if (flag) {\r\n            pos = i\r\n            break\r\n          }\r\n        }\r\n      }\r\n\r\n      if (pos !== -1) {\r\n        for (let i = pos, max = pos + occupy; i < max; i++) {\r\n          channel = channels[i]\r\n          channel.operating[bullet.mode] = true\r\n          channel.queue[bullet.mode].unshift(bullet)\r\n          if (bullet.prior) {\r\n            delete channel.bookId[bullet.mode]\r\n            // console.log(i + '号轨道恢复正常使用')\r\n          }\r\n          channel.operating[bullet.mode] = false\r\n        }\r\n        if (bullet.prior) {\r\n          // console.log(bullet.id + '号优先弹幕运行完毕')\r\n          delete bullet['bookChannelId']\r\n          if(danmu.player) {\r\n            let dataList = danmu.bulletBtn.main.data\r\n            dataList.some(function (item) {\r\n              if (item.id === bullet.id) {\r\n                delete item['bookChannelId']\r\n                return true\r\n              } else {\r\n                return false\r\n              }\r\n            })\r\n          }\r\n        }\r\n        bullet.channel_id = [pos, occupy]\r\n\r\n        if(self.direction === 'b2t') {\r\n          bullet.top = pos * channelWidth\r\n          if (self.danmu.config.area && self.danmu.config.area.start) {\r\n            bullet.top += self.containerWidth * self.danmu.config.area.start\r\n          }\r\n        } else {\r\n          bullet.top = pos * channelHeight\r\n          if (self.danmu.config.area && self.danmu.config.area.start) {\r\n            bullet.top += self.containerHeight * self.danmu.config.area.start\r\n          }\r\n        }\r\n        return {\r\n          result: bullet,\r\n          message: 'success'\r\n        }\r\n      } else {\r\n        if (bullet.prior) {\r\n          if (!bullet.bookChannelId) {\r\n            pos = -1\r\n            for (let i = 0, max = channels.length - occupy; i <= max; i++) {\r\n              flag = true\r\n              for (let j = i; j < i + occupy; j++) {\r\n                if (channels[j].bookId[bullet.mode]) {\r\n                  flag = false\r\n                  break\r\n                }\r\n              }\r\n              if (flag) {\r\n                pos = i\r\n                break\r\n              }\r\n            }\r\n            if (pos !== -1) {\r\n              for (let j = pos; j < pos + occupy; j++) {\r\n                channels[j].bookId[bullet.mode] = bullet.id\r\n                // console.log(j + '号轨道被' + bullet.id + '号优先弹幕预定')\r\n              }\r\n              let nextAddTime = 2\r\n              if(danmu.player) {\r\n                let dataList = danmu.bulletBtn.main.data\r\n                dataList.some(function (item) {\r\n                  if (item.id === bullet.id) {\r\n                    // console.log(bullet.id + '号优先弹幕将于' + nextAddTime + '秒后再次请求注册')\r\n                    item.start += nextAddTime * 1000\r\n                    item.bookChannelId = [pos, occupy]\r\n                    // console.log(bullet.id + '号优先弹幕预定了' + pos + '~' + pos + occupy - 1 + '号轨道')\r\n                    // console.log(`${bullet.id}号优先弹幕预定了${pos}~${pos + occupy - 1}号轨道`)\r\n                    return true\r\n                  } else {\r\n                    return false\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          } else {\r\n            let nextAddTime = 2\r\n            if(danmu.player) {\r\n              let dataList = danmu.bulletBtn.main.data\r\n              dataList.some(function (item) {\r\n                if (item.id === bullet.id) {\r\n                  // console.log(bullet.id + '号优先弹幕将于' + nextAddTime + '秒后再次请求注册')\r\n                  item.start += nextAddTime * 1000\r\n                  return true\r\n                } else {\r\n                  return false\r\n                }\r\n              })\r\n            }\r\n          }\r\n        }\r\n        return {\r\n          result: false,\r\n          message: 'no surplus will right'\r\n        }\r\n      }\r\n    }\r\n  }\r\n  removeBullet (bullet) {\r\n    // console.log('removeBullet')\r\n    let channels = this.channels\r\n    let channelId = bullet.channel_id\r\n    let channel\r\n    for (let i = channelId[0], max = channelId[0] + channelId[1]; i < max; i++) {\r\n      channel = channels[i]\r\n      if (channel) {\r\n        channel.operating[bullet.mode] = true\r\n        let i = -1\r\n        channel.queue[bullet.mode].some((item, index) => {\r\n          if (item.id === bullet.id) {\r\n            i = index\r\n            return true\r\n          } else {\r\n            return false\r\n          }\r\n        })\r\n        if (i > -1) {\r\n          channel.queue[bullet.mode].splice(i, 1)\r\n        }\r\n        channel.operating[bullet.mode] = false\r\n      }\r\n    }\r\n    if(bullet.options.loop) {\r\n      this.danmu.bulletBtn.main.playedData.push(bullet.options)\r\n    }\r\n  }\r\n  resetArea () {\r\n    let container = this.danmu.container\r\n    let self = this\r\n    let size = container.getBoundingClientRect()\r\n    self.width = size.width\r\n    self.height = size.height\r\n    if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\r\n      if(self.direction === 'b2t') {\r\n        self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\r\n      } else {\r\n        self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\r\n      }\r\n    }\r\n    self.container = container\r\n    let fontSize =self.danmu.config.channelSize || (/mobile/ig.test(navigator.userAgent) ? 10 : 12)\r\n    let channelSize\r\n    if(self.direction === 'b2t') {\r\n      channelSize = Math.floor(self.width / fontSize)\r\n    } else {\r\n      channelSize = Math.floor(self.height / fontSize)\r\n    }\r\n\r\n    let channels = []\r\n    for (let i = 0; i < channelSize; i++) {\r\n      channels[i] = {\r\n        id: i,\r\n        queue: {\r\n          scroll: [],\r\n          top: [],\r\n          bottom: []\r\n        },\r\n        operating: {\r\n          scroll: false,\r\n          top: false,\r\n          bottom: false\r\n        },\r\n        bookId: {}\r\n      }\r\n    }\r\n\r\n    if (self.channels && self.channels.length <= channels.length) {\r\n      for (let i = 0; i < self.channels.length; i++) {\r\n        channels[i] = {\r\n          id: i,\r\n          queue: {\r\n            scroll: [],\r\n            top: [],\r\n            bottom: []\r\n          },\r\n          operating: {\r\n            scroll: false,\r\n            top: false,\r\n            bottom: false\r\n          },\r\n          bookId: {}\r\n        };\r\n        ['scroll', 'top'].forEach(key => {\r\n          self.channels[i].queue[key].forEach(item => {\r\n            if (item.el) {\r\n              channels[i].queue[key].push(item)\r\n              if(!item.resized) {\r\n                item.pauseMove(self.containerPos, false)\r\n                item.startMove(self.containerPos)\r\n                item.resized = true\r\n              }\r\n            }\r\n          })\r\n        })\r\n        self.channels[i].queue['bottom'].forEach(item => {\r\n          if (item.el) {\r\n            channels[i + channels.length - self.channels.length].queue['bottom'].push(item)\r\n            if(item.channel_id[0] + item.channel_id[1] - 1 === i) {\r\n              let channel_id = [].concat(item.channel_id)\r\n              item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\r\n              item.top = item.channel_id[0] * fontSize\r\n              if (self.danmu.config.area && self.danmu.config.area.start) {\r\n                item.top += self.containerHeight * self.danmu.config.area.start\r\n              }\r\n              item.topInit()\r\n            }\r\n            if(!item.resized) {\r\n              item.pauseMove(self.containerPos, false)\r\n              item.startMove(self.containerPos)\r\n              item.resized = true\r\n            }\r\n          }\r\n        })\r\n      }\r\n      for (let i = 0; i < channels.length; i++) {\r\n        ['scroll', 'top', 'bottom'].forEach(key => {\r\n          channels[i].queue[key].forEach(item => {\r\n            // console.log('resized 重置:' + item)\r\n            item.resized = false\r\n          })\r\n        })\r\n      }\r\n      self.channels = channels\r\n      if(self.direction === 'b2t') {\r\n        self.channelWidth = fontSize\r\n      } else {\r\n        self.channelHeight = fontSize\r\n      }\r\n    } else if (self.channels && self.channels.length > channels.length) {\r\n      for (let i = 0; i < channels.length; i++) {\r\n        channels[i] = {\r\n          id: i,\r\n          queue: {\r\n            scroll: [],\r\n            top: [],\r\n            bottom: []\r\n          },\r\n          operating: {\r\n            scroll: false,\r\n            top: false,\r\n            bottom: false\r\n          },\r\n          bookId: {}\r\n        };\r\n        ['scroll', 'top', 'bottom'].forEach(key => {\r\n          if (key === 'top' && i > Math.floor(channels.length / 2)) {\r\n\r\n          } else if (key === 'bottom' && i <= Math.floor(channels.length / 2)) {\r\n\r\n          } else {\r\n            let num = key === 'bottom' ? i - channels.length + self.channels.length : i\r\n            self.channels[num].queue[key].forEach((item, index) => {\r\n              if (item.el) {\r\n                channels[i].queue[key].push(item)\r\n                if(key === 'bottom') {\r\n                  if(item.channel_id[0] + item.channel_id[1] - 1 === num) {\r\n                    let channel_id = [].concat(item.channel_id)\r\n                    item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\r\n                    item.top = item.channel_id[0] * fontSize\r\n                    if (self.danmu.config.area && self.danmu.config.area.start) {\r\n                      item.top += self.containerHeight * self.danmu.config.area.start\r\n                    }\r\n                    item.topInit()\r\n                  }\r\n                }\r\n                if(!item.resized) {\r\n                  item.pauseMove(self.containerPos, false)\r\n                  item.startMove(self.containerPos)\r\n                  item.resized = true\r\n                }\r\n              }\r\n              self.channels[num].queue[key].splice(index, 1)\r\n            })\r\n          }\r\n        })\r\n      }\r\n      // for (let i = channels.length; i < self.channels.length; i++) {\r\n      //   ['scroll', 'top', 'bottom'].forEach(key => {\r\n      //     self.channels[i].queue[key].forEach(item => {\r\n      //       item.pauseMove(self.containerPos)\r\n      //       item.remove()\r\n      //     })\r\n      //   })\r\n      // }\r\n      for (let i = 0; i < channels.length; i++) {\r\n        ['scroll', 'top', 'bottom'].forEach(key => {\r\n          channels[i].queue[key].forEach(item => {\r\n            // console.log('resized 重置:' + item)\r\n            item.resized = false\r\n          })\r\n        })\r\n      }\r\n      self.channels = channels\r\n      if(self.direction === 'b2t') {\r\n        self.channelWidth = fontSize\r\n      } else {\r\n        self.channelHeight = fontSize\r\n      }\r\n    }\r\n  }\r\n  reset () {\r\n    let container = this.danmu.container\r\n    let self = this\r\n    if (self.channels && self.channels.length > 0) {\r\n      ['scroll', 'top', 'bottom'].forEach(key => {\r\n        for (let i = 0; i < self.channels.length; i++) {\r\n          self.channels[i].queue[key].forEach(item => {\r\n            item.pauseMove(self.containerPos)\r\n            item.remove()\r\n          })\r\n        }\r\n      })\r\n    }\r\n    setTimeout(function () {\r\n      let size = container.getBoundingClientRect()\r\n      self.width = size.width\r\n      self.height = size.height\r\n      if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\r\n        if(self.direction === 'b2t') {\r\n          self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\r\n        } else {\r\n          self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\r\n        }\r\n      }\r\n      self.container = container\r\n      let fontSize = self.danmu.config.channelSize || (/mobile/ig.test(navigator.userAgent) ? 10 : 12)\r\n      let channelSize\r\n      if(self.direction === 'b2t') {\r\n        channelSize = Math.floor(self.width / fontSize)\r\n      } else {\r\n        channelSize = Math.floor(self.height / fontSize)\r\n      }\r\n\r\n      let channels = []\r\n      for (let i = 0; i < channelSize; i++) {\r\n        channels[i] = {\r\n          id: i,\r\n          queue: {\r\n            scroll: [],\r\n            top: [],\r\n            bottom: []\r\n          },\r\n          operating: {\r\n            scroll: false,\r\n            top: false,\r\n            bottom: false\r\n          },\r\n          bookId: {}\r\n        }\r\n      }\r\n      self.channels = channels\r\n      if(self.direction === 'b2t') {\r\n        self.channelWidth = fontSize\r\n      } else {\r\n        self.channelHeight = fontSize\r\n      }\r\n    }, 200)\r\n  }\r\n  resetWithCb (cb, main) {\r\n    let container = this.danmu.container\r\n    let self = this\r\n    if (self.channels && self.channels.length > 0) {\r\n      ['scroll', 'top', 'bottom'].forEach(key => {\r\n        for (let i = 0; i < self.channels.length; i++) {\r\n          self.channels[i].queue[key].forEach(item => {\r\n            item.pauseMove(self.containerPos)\r\n            item.remove()\r\n          })\r\n        }\r\n      })\r\n    }\r\n    let size = container.getBoundingClientRect()\r\n    self.width = size.width\r\n    self.height = size.height\r\n    if (self.danmu.config.area && self.danmu.config.area.start >= 0 && self.danmu.config.area.end >= self.danmu.config.area.start) {\r\n      if(self.direction === 'b2t') {\r\n        self.width = self.width * (self.danmu.config.area.end - self.danmu.config.area.start)\r\n      } else {\r\n        self.height = self.height * (self.danmu.config.area.end - self.danmu.config.area.start)\r\n      }\r\n    }\r\n    self.container = container\r\n    let fontSize = self.danmu.config.channelSize || (/mobile/ig.test(navigator.userAgent) ? 10 : 12)\r\n    let channelSize\r\n    if(self.direction === 'b2t') {\r\n      channelSize = Math.floor(self.width / fontSize)\r\n    } else {\r\n      channelSize = Math.floor(self.height / fontSize)\r\n    }\r\n    let channels = []\r\n    for (let i = 0; i < channelSize; i++) {\r\n      channels[i] = {\r\n        id: i,\r\n        queue: {\r\n          scroll: [],\r\n          top: [],\r\n          bottom: []\r\n        },\r\n        operating: {\r\n          scroll: false,\r\n          top: false,\r\n          bottom: false\r\n        },\r\n        bookId: {}\r\n      }\r\n    }\r\n    self.channels = channels\r\n    self.channelHeight = fontSize\r\n    if (cb) {\r\n      cb(true, main)\r\n    }\r\n  }\r\n}\r\n\r\nexport default Channel\r\n","import util from './utils/util'\r\n\r\n/**\r\n * [Bullet 弹幕构造类]\r\n * @type {Class}\r\n */\r\nclass Bullet {\r\n  constructor (danmu, options) {\r\n    this.danmu = danmu\r\n    this.options = options\r\n    this.duration = options.duration\r\n    this.moveV = options.moveV\r\n    this.id = options.id\r\n    this.container = danmu.container\r\n    this.start = options.start\r\n    this.prior = options.prior\r\n    this.color = options.color\r\n    this.bookChannelId = options.bookChannelId\r\n    this.direction = danmu.direction\r\n    let self = this\r\n    this.danmu.on('changeDirection', direction => {\r\n      self.direction = direction\r\n    })\r\n    let el\r\n    this.domObj = util.domObj\r\n    if(options.el && options.el.nodeType === 1) {\r\n      el = this.domObj.use()\r\n      el.appendChild(util.copyDom(options.el))\r\n      // el = util.copyDom(options.el)\r\n    } else {\r\n      el = this.domObj.use()\r\n      // el = document.createElement('div')\r\n      el.textContent = options.txt\r\n      if(options.style) {\r\n        let style = options.style\r\n        Object.keys(style).forEach(function (key) {\r\n          el.style[key] = style[key]\r\n        })\r\n      }\r\n    }\r\n    if(options.mode === 'top' || options.mode === 'bottom') {\r\n      this.mode = options.mode\r\n    } else {\r\n      this.mode = 'scroll'\r\n    }\r\n    this.el = el\r\n    if (options.like && options.like.el) {\r\n      this.setLikeDom(options.like.el, options.like.style)\r\n    }\r\n    this.status = 'waiting'// waiting,start,end\r\n    let containerPos = this.container.getBoundingClientRect()\r\n    var random = Math.floor(Math.random() * ((containerPos.width / 10) > 100 ? 200 : containerPos.width / 10));\r\n    if (options.realTime) {\r\n      random = 0\r\n    }\r\n    this.el.style.left = containerPos.width + random + 'px';\r\n  }\r\n  attach () {\r\n    let self = this\r\n    self.container.appendChild(self.el)\r\n    self.elPos = self.el.getBoundingClientRect()\r\n    if(self.direction === 'b2t') {\r\n      self.width = self.elPos.height\r\n      self.height = self.elPos.width\r\n    } else {\r\n      self.width = self.elPos.width\r\n      self.height = self.elPos.height\r\n    }\r\n    if(self.moveV) {\r\n      let containerPos = self.container.getBoundingClientRect()\r\n      self.duration = (containerPos.width + self.width) / self.moveV * 1000\r\n    }\r\n    if (self.danmu.config.mouseControl) {\r\n      self.el.addEventListener('mouseover', self.mouseoverFun.bind(self))\r\n    } \r\n  }\r\n  mouseoverFun (event) {\r\n    let self = this\r\n    if ((self.danmu.mouseControl && self.danmu.config.mouseControlPause) || self.status === 'waiting' || self.status === 'end') {\r\n      return\r\n    } \r\n    self.danmu.emit('bullet_hover', {\r\n      bullet: self,\r\n      event: event\r\n    })\r\n  }\r\n  detach () {\r\n    let self = this\r\n    if(self.container && self.el) {\r\n      self.domObj.unuse(self.el)\r\n    }\r\n    self.danmu.off('changeDirection', direction => {\r\n      self.direction = direction\r\n    })\r\n  }\r\n  topInit () {\r\n    if(this.direction === 'b2t') {\r\n      let containerPos = this.container.getBoundingClientRect()\r\n      this.el.style.transformOrigin = 'left top'\r\n      this.el.style.transform = `translateX(-${this.top}px) translateY(${containerPos.height}px) translateZ(0px) rotate(90deg)`;\r\n      this.el.style.transition = `transform 0s linear 0s`\r\n    } else {\r\n      this.el.style.top = `${this.top}px`\r\n    }\r\n  }\r\n  pauseMove (containerPos, isFullscreen = false) {\r\n    // console.log('pauseMove')\r\n    let self = this\r\n    if(this.status === 'paused') {\r\n      return\r\n    }\r\n    if (self.status !== 'forcedPause') {\r\n      this.status = 'paused'\r\n    }\r\n    clearTimeout(self.removeTimer)\r\n    if (!this.el) {\r\n      return\r\n    }\r\n    this.el.style.willChange = 'auto'\r\n    if(this.mode === 'scroll') {\r\n      if(isFullscreen) {\r\n        let pastDuration = (new Date().getTime() - self.moveTime) / 1000\r\n        let pastS = pastDuration * this.moveV\r\n        let ratio = 0\r\n        let nowS = 0\r\n        // console.log('self.moveMoreS: ' + self.moveMoreS)\r\n        // console.log('pastS: ' + pastS)\r\n        if(self.moveMoreS - pastS >= 0) {\r\n          if(this.direction === 'b2t') {\r\n            ratio = (self.moveMoreS - pastS) / self.moveContainerHeight\r\n            nowS = ratio * containerPos.height\r\n          } else {\r\n            ratio = (self.moveMoreS - pastS) / self.moveContainerWidth\r\n            nowS = ratio * containerPos.width\r\n          }\r\n        } else {\r\n          nowS = self.moveMoreS - pastS\r\n        }\r\n        // console.log('nowS: ' + nowS)\r\n        if(this.direction === 'b2t') {\r\n          this.el.style.transform = `translateX(-${this.top}px) translateY(${nowS}px) translateZ(0px) rotate(90deg)`\r\n        } else {\r\n          this.el.style.left = `${nowS}px`\r\n        }\r\n      } else {\r\n        if(this.direction === 'b2t') {\r\n          this.el.style.transform = `translateX(-${this.top}px) translateY(${this.el.getBoundingClientRect().top - containerPos.top}px) translateZ(0px) rotate(90deg)`\r\n        } else {\r\n          this.el.style.left = `${this.el.getBoundingClientRect().left - containerPos.left}px`\r\n        }\r\n      }\r\n      if(this.direction === 'b2t') {\r\n        // this.el.style.transform = `translateX(-${this.top}px) translateY(${nowS}px) translateZ(0px) rotate(90deg)`\r\n        this.el.style.transition = 'transform 0s linear 0s'\r\n      } else {\r\n        this.el.style.transform = 'translateX(0px) translateY(0px) translateZ(0px)'\r\n        this.el.style.transition = 'transform 0s linear 0s'\r\n      }\r\n    } else {\r\n      if(!this.pastDuration || !this.startTime) {\r\n        this.pastDuration = 1\r\n      } else {\r\n        this.pastDuration = this.pastDuration + new Date().getTime() - this.startTime\r\n      }\r\n    }\r\n  }\r\n  startMove (containerPos, force) {\r\n    let self = this\r\n    if (!self.hasMove) {\r\n      self.danmu.emit('bullet_start', self)\r\n      self.hasMove = true\r\n    }\r\n    if (self.status === 'forcedPause' && !force) {\r\n      return\r\n    }\r\n    if (!this.el) return\r\n    if(this.status === 'start') return\r\n    this.status = 'start'\r\n    this.el.style.willChange = 'transform'\r\n    function func () {\r\n      if (self.el) {\r\n        if(self.mode === 'scroll') {\r\n          let containerPos_ = self.danmu.container.getBoundingClientRect()\r\n          let bulletPos = self.el.getBoundingClientRect()\r\n          if(self.direction === 'b2t') {\r\n            if (bulletPos && bulletPos.bottom <= containerPos_.top + 100) {\r\n              self.status = 'end'\r\n              self.remove()\r\n            } else {\r\n              self.pauseMove(containerPos_)\r\n              if (self.danmu.bulletBtn.main.status !== 'paused') {\r\n                self.startMove(containerPos_)\r\n              }\r\n            }\r\n          } else {\r\n            if (bulletPos && bulletPos.right <= containerPos_.left + 100) {\r\n              self.status = 'end'\r\n              self.remove()\r\n            } else {\r\n              self.pauseMove(containerPos_)\r\n              if (self.danmu.bulletBtn.main.status !== 'paused') {\r\n                self.startMove(containerPos_)\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          self.status = 'end'\r\n          self.remove()\r\n        }\r\n      }\r\n    }\r\n    if(this.mode === 'scroll') {\r\n      if(this.direction === 'b2t') {\r\n        this.moveV = (containerPos.height + this.height) / this.duration * 1000\r\n        let leftDuration = (self.el.getBoundingClientRect().bottom - containerPos.top) / this.moveV\r\n        this.el.style.transition = `transform ${leftDuration}s linear 0s`\r\n        setTimeout(function () {\r\n          if (self.el) {\r\n            self.el.style.transform = `translateX(-${self.top}px) translateY(-${self.height}px) translateZ(0px) rotate(90deg)`\r\n            self.moveTime = new Date().getTime()\r\n            self.moveMoreS = self.el.getBoundingClientRect().top - containerPos.top\r\n            self.moveContainerHeight = containerPos.height\r\n            self.removeTimer = setTimeout(func, leftDuration * 1000)\r\n          }\r\n        }, 20)\r\n      } else {\r\n        this.moveV = (containerPos.width + this.width) / this.duration * 1000\r\n        let leftDuration = (self.el.getBoundingClientRect().right - containerPos.left) / this.moveV\r\n        this.el.style.transition = `transform ${leftDuration}s linear 0s`\r\n        setTimeout(function () {\r\n          if (self.el) {\r\n            self.el.style.transform = `translateX(-${self.el.getBoundingClientRect().right - containerPos.left}px) translateY(0px) translateZ(0px)`\r\n            self.moveTime = new Date().getTime()\r\n            self.moveMoreS = self.el.getBoundingClientRect().left - containerPos.left\r\n            self.moveContainerWidth = containerPos.width\r\n            self.removeTimer = setTimeout(func, leftDuration * 1000)\r\n          }\r\n        }, 20)\r\n      }\r\n    } else {\r\n      // this.el.style.width = `${this.width}px`\r\n      // this.el.style.height = `${this.height}px`\r\n      this.el.style.left = '50%'\r\n      this.el.style.margin = `0 0 0 -${this.width/2}px`\r\n      if(!this.pastDuration) {\r\n        this.pastDuration = 1\r\n      }\r\n      let leftDuration = this.duration >= this.pastDuration ? this.duration - this.pastDuration : 0\r\n      this.removeTimer = setTimeout(func, leftDuration)\r\n      this.startTime = new Date().getTime()\r\n    }\r\n  }\r\n  remove () {\r\n    // console.log('remove')\r\n    let self = this\r\n    if (this.removeTimer) {\r\n      clearTimeout(this.removeTimer)\r\n    }\r\n    if (self.el && self.el.parentNode) {\r\n      self.el.style.willChange = 'auto'\r\n      this.danmu.off('changeDirection', direction => {\r\n        self.direction = direction\r\n      })\r\n      // self.el.removeEventListener('mouseover', self.mouseoverFun.bind(self))\r\n      this.domObj.unuse(self.el)\r\n      let parent = self.el.parentNode\r\n      parent.removeChild(self.el)\r\n      self.el = null\r\n      self.danmu.emit('bullet_remove', {\r\n        bullet: self\r\n      })\r\n    }\r\n  }\r\n  setFontSize (size) {\r\n    if (this.el) {\r\n      this.el.style[ 'fontSize' ] = size\r\n    }\r\n  }\r\n  setLikeDom (el, style) {\r\n    if (el) {\r\n      Object.keys(style).forEach(function (key) {\r\n        el.style[key] = style[key]\r\n      })\r\n      let likeClass = 'danmu-like'\r\n      el.className = likeClass\r\n      if (this.el) {\r\n        let children = this.el.querySelector('.' + likeClass)\r\n        if (children) {\r\n          this.el.removeChild(children)\r\n        }\r\n        this.el.innerHTML = `${this.el.innerHTML}${el.outerHTML}`\r\n      }\r\n    }\r\n    return el\r\n  }\r\n}\r\n\r\nexport default Bullet\r\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/dist/cjs.js!./index.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js??ref--5-1!../../node_modules/postcss-loader/lib/index.js!../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".danmu{overflow:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.danmu>*{position:absolute;white-space:nowrap}.danmu-switch{width:32px;height:20px;border-radius:100px;background-color:#ccc;-webkit-box-sizing:border-box;box-sizing:border-box;outline:none;cursor:pointer;position:relative;text-align:center;margin:10px auto}.danmu-switch.danmu-switch-active{padding-left:12px;background-color:#f85959}.danmu-switch span.txt{width:20px;height:20px;line-height:20px;text-align:center;display:block;border-radius:100px;background-color:#ffffff;-webkit-box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);font-family:PingFangSC;font-size:10px;font-weight:500;color:#f44336}\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target) {\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n"],"sourceRoot":""}